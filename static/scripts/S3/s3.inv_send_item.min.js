var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,d,c){a instanceof String&&(a=String(a));for(var e=a.length,b=0;b<e;b++){var k=a[b];if(d.call(c,k,b,a))return{i:b,v:k}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,c){if(a==Array.prototype||a==Object.prototype)return a;a[d]=c.value;return a};$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var d=0;d<a.length;++d){var c=a[d];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,d){var c=$jscomp.propertyToPolyfillSymbol[d];if(null==c)return a[d];c=a[c];return void 0!==c?c:a[d]};
$jscomp.polyfill=function(a,d,c,e){d&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,d,c,e):$jscomp.polyfillUnisolated(a,d,c,e))};$jscomp.polyfillUnisolated=function(a,d,c,e){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var b=a[e];if(!(b in c))return;c=c[b]}a=a[a.length-1];e=c[a];d=d(e);d!=e&&null!=d&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:d})};
$jscomp.polyfillIsolated=function(a,d,c,e){var b=a.split(".");a=1===b.length;e=b[0];e=!a&&e in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var k=0;k<b.length-1;k++){var y=b[k];if(!(y in e))return;e=e[y]}b=b[b.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?e[b]:null;d=d(c);null!=d&&(a?$jscomp.defineProperty($jscomp.polyfills,b,{configurable:!0,writable:!0,value:d}):d!==c&&(void 0===$jscomp.propertyToPolyfillSymbol[b]&&(c=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[b]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(b):$jscomp.POLYFILL_PREFIX+c+"$"+b),$jscomp.defineProperty(e,$jscomp.propertyToPolyfillSymbol[b],{configurable:!0,writable:!0,value:d})))};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(d,c){return $jscomp.findInternal(this,d,c).v}},"es6","es3");
$(document).ready(function(){var a=$("#inv_track_item_send_inv_item_id");if(a.length){var d=S3.supply.inv_items,c,e,b,k=S3.supply.binnedQuantity||0,y=$("#inv_track_item_sub_defaultsend_bin__row"),I,J,Z=$("#rdy-defaultbin-0"),v,Q=$("#quantity__error"),f,K=$("#sub-defaultsend_bin"),C=$("#inv_track_item_item_pack_id"),t=$("#sub_defaultsend_bin_defaultsend_bin_i_quantity_edit_none"),A=$("#sub_defaultsend_bin_defaultsend_bin_i_layout_id_edit_none-hierarchy"),D=$("#sub_defaultsend_bin_defaultsend_bin_i_quantity_edit_0"),
R,g,p,E,S,l=$("#inv_track_item_quantity"),O=$("#inv_track_item_req_item_id__row"),F,aa=S3.supply.site_id,B=a.val(),u,h,ba=$('div[id^="sub_defaultsend_bin_defaultsend_bin_i_layout_id"].s3-hierarchy-widget');O.length&&O.hide();var T=function(){y.show();b=I[0].q;b>m?t.val(m):t.val(b)};a.on("change.s3",function(n,G){var w=a.val(),P;C.html("");G||(l.val(""),m=0);$("#TotalQuantity").remove();if(""!==w){n=d[w];var L=!0,M=n.p,N=M.length,x=n.r,U=n.q;K.inlinecomponent("removeRows");I=n.b;J=I.length;if(0==J)y.hide();
else if(1==J){y.show();T();var V=function(){A.hierarchicalopts("set",[I[0].l]);t.attr("disabled","disabled");$("#add-row-defaultsend_bin > .subform-action").hide();A.next(".s3_inline_add_resource_link").hide();$(".s3-hierarchy-button").attr("disabled","disabled")};if(A.is(":data('s3-hierarchicalopts')"))V();else A.find(".s3-hierarchy-tree").first().on("ready.jstree",function(){V()})}else y.show(),t.removeAttr("disabled"),$("#add-row-defaultsend_bin > .subform-action").show(),A.next(".s3_inline_add_resource_link").show(),
$(".s3-hierarchy-button").removeAttr("disabled"),A.find(".s3-hierarchy-tree").first().on("ready.jstree",function(){c=S3.Ap.concat("/org/site/"+aa+"/layout/hierarchy.tree?inv_item_id="+w);ba.hierarchicalopts("reload",c)});for(f=0;f<N;f++)if(g=M[f],1==g.q){S=g.n;break}for(f=0;f<N;f++)g=M[f],W&&B==w&&W==g.i?(p=P=g.q,E=g.n,F=" selected"):L?(p=g.q,E=g.n,F=" selected"):F="",R=1!==g.q?'<option value="'+g.i+'"'+F+">"+g.n+" ("+g.q+" x "+S+")</option>":'<option value="'+g.i+'"'+F+">"+g.n+"</option>",C.append(R),
L=!1;if(Q.length)for(n=Q.html().split(" "),f=0;f<n.length&&!(h=parseFloat(n[f]));f++);else h=U/p,u&&B==w&&(h+=u*P/p);n='<span id="TotalQuantity"> / '+h.toFixed(2)+" "+E+" ("+i18n.in_inv+")</span>";l.after(n);if(x){var q=x[0];var X=function(){if(1==x.length){if(!u||B!=w){var r=q.q/p;r<=h?l.val(r):l.val(h)}$("#inv_track_item_req_item_id").val(q.i)}else{O.show();var H=$("#inv_track_item_req_item_id"),z=H.val();z&&(z=parseInt(z));H.html("");for(f=0;f<x.length;f++)q=x[f],H.append(new Option(q.r,q.i)),
z?q.i!=z||u&&B==w||(r=q.q/p,r<=h?l.val(r):l.val(h)):L&&(r=q.q/p,r<=h?l.val(r):l.val(h)),L=!1;H.on("change",function(){z=parseInt(H.val());for(f=0;f<x.length;f++)if(q=x[f],q.i==z){r=q.q/p;r<=h?l.val(r):l.val(h);break}})}};X()}if(1<N){var Y;C.on("change",function(){Y=parseInt(C.val());for(f=0;f<N;f++)if(g=M[f],g.i==Y){p=g.q;E=g.n;h=U/p;u&&B==w&&(h+=u*P/p);$("#TotalQuantity").html(h.toFixed(2)+" "+E+" ("+i18n.in_inv+")");x&&X();break}})}}});if(B){var m=(u=l.val())?u=parseFloat(u):0;var W=parseInt(C.val());
a.trigger("change.s3",!0)}K.on("click.s3",".inline-edt",function(){b=(b=D.val())?parseFloat(b):0;k-=b});Z.click(function(){b=(b=D.val())?parseFloat(b):0;k+=b;t.change()});l.change(function(){(m=l.val())?(m=parseFloat(m),$("#inv_track_item_quantity-error").remove()):m=0;m>h?(message="Total Quantity reduced to Quantity in Stock",v=$('<div id="inv_track_item_quantity-warning" class="alert alert-warning" style="padding-left:36px;">'+message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),
l.val(h).parent().append(v).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();return!1})):m<k&&(message="Total Quantity increased to Quantity in Bins",v=$('<div id="inv_track_item_quantity-warning" class="alert alert-warning" style="padding-left:36px;">'+message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),l.val(k).parent().append(v).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();
return!1}));1==J&&T();t.change()});t.change(function(){b=(b=t.val())?parseFloat(b):0;e=m-k;b>e&&(message="Bin Quantity reduced to Available Quantity",v=$('<div id="sub_defaultsend_bin_defaultsend_bin_i_quantity_edit_none-warning" class="alert alert-warning" style="padding-left:36px;">'+message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),t.val(e).parent().append(v).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();return!1}))});
D.change(function(){b=(b=D.val())?parseFloat(b):0;e=m-k;b>e&&(message="Bin Quantity reduced to Available Quantity",v=$('<div id="sub_defaultsend_bin_defaultsend_bin_i_quantity_edit_0-warning" class="alert alert-warning" style="padding-left:36px;">'+message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),D.val(e).parent().append(v).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();return!1}))});K.on("rowAdded",function(n,G){k+=
parseFloat(G.quantity.value);$("#sub_defaultsend_bin_defaultsend_bin_i_quantity_edit_none-warning").remove()});K.on("rowRemoved",function(n,G){k-=parseFloat(G.quantity.value)})}});

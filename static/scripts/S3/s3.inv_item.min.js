$(document).ready(function(){var k,d,a,c=S3.supply.binnedQuantity||0,e,l=$("#sub-defaultbin"),t=$('a[id^="inv"].s3_add_resource_link'),u=$("#rdy-defaultbin-0"),f=$("#sub_defaultbin_defaultbin_i_quantity_edit_none"),v=/%5Bid%5D/g,g=$("#sub_defaultbin_defaultbin_i_quantity_edit_0"),p=$("#inv_inv_item_site_id"),q=p.val(),m=$("#inv_inv_item_quantity"),b=m.val(),h,n,w=$('div[id^="sub_defaultbin_defaultbin_i_layout_id"].s3-hierarchy-widget');p.change(function(){l.inlinecomponent("removeRows");h=p.val();
k=S3.Ap.concat("/org/site/"+h+"/layout/hierarchy.tree");w.hierarchicalopts("reload",k);t.each(function(){n=$(this);k=q?n.attr("href").replace(q,h):n.attr("href").replace(v,h);n.attr("href",k)});q=h});b=b?parseFloat(b):0;l.on("click.s3",".inline-edt",function(){a=(a=g.val())?parseFloat(a):0;c-=a});u.click(function(){a=(a=g.val())?parseFloat(a):0;c+=a;f.change()});m.change(function(){b=(b=m.val())?parseFloat(b):0;b<c&&(message="Total Quantity reduced to Quantity in Bins",e=$('<div class="alert alert-warning" style="padding-left:36px;">'+
message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),m.val(c).parent().append(e).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();return!1}));f.change()});f.change(function(){a=(a=f.val())?parseFloat(a):0;d=b-c;a>d&&(message="Bin Quantity reduced to Available Quantity",e=$('<div class="alert alert-warning" style="padding-left:36px;">'+message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),
f.val(d).parent().append(e).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();return!1}))});g.change(function(){a=(a=g.val())?parseFloat(a):0;d=b-c;a>d&&(message="Bin Quantity reduced to Available Quantity",e=$('<div class="alert alert-warning" style="padding-left:36px;">'+message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),g.val(d).parent().append(e).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();
return!1}))});l.on("rowAdded",function(x,r){c+=parseFloat(r.quantity.value)});l.on("rowRemoved",function(x,r){c-=parseFloat(r.quantity.value)})});

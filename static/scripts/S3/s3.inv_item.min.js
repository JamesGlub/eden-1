$(document).ready(function(){var d,a,c=S3.supply.binnedQuantity||0,e,k=$("#sub-defaultbin"),t=$("#rdy-defaultbin-0"),f=$("#sub_defaultbin_defaultbin_i_quantity_edit_none"),g=$("#sub_defaultbin_defaultbin_i_quantity_edit_0"),l=$("#inv_inv_item_site_id"),m=$("#inv_inv_item_quantity"),b=m.val(),n;if(l.length){var p,u=$('a[id^="inv"].s3_add_resource_link'),v=/%5Bid%5D/g,q=l.val(),h,w=$('div[id^="sub_defaultbin_defaultbin_i_layout_id"].s3-hierarchy-widget');l.change(function(){k.inlinecomponent("removeRows");
h=l.val();p=S3.Ap.concat("/org/site/"+h+"/layout/hierarchy.tree");w.hierarchicalopts("reload",p);u.each(function(){n=$(this);p=q?n.attr("href").replace(q,h):n.attr("href").replace(v,h);n.attr("href",p)});q=h})}b=b?parseFloat(b):0;k.on("click.s3",".inline-edt",function(){a=(a=g.val())?parseFloat(a):0;c-=a});t.click(function(){a=(a=g.val())?parseFloat(a):0;c+=a;f.change()});m.change(function(){b=(b=m.val())?parseFloat(b):0;b<c&&(message="Total Quantity reduced to Quantity in Bins",e=$('<div class="alert alert-warning" style="padding-left:36px;">'+
message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),m.val(c).parent().append(e).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();return!1}));f.change()});f.change(function(){a=(a=f.val())?parseFloat(a):0;d=b-c;a>d&&(message="Bin Quantity reduced to Available Quantity",e=$('<div class="alert alert-warning" style="padding-left:36px;">'+message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),
f.val(d).parent().append(e).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();return!1}))});g.change(function(){a=(a=g.val())?parseFloat(a):0;d=b-c;a>d&&(message="Bin Quantity reduced to Available Quantity",e=$('<div class="alert alert-warning" style="padding-left:36px;">'+message+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>'),g.val(d).parent().append(e).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();
return!1}))});k.on("rowAdded",function(x,r){c+=parseFloat(r.quantity.value)});k.on("rowRemoved",function(x,r){c-=parseFloat(r.quantity.value)})});
